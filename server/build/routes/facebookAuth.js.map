{"version":3,"sources":["../../src/routes/facebookAuth.js"],"names":["router","get","passport","authenticate","scope","clientUrl","process","env","NODE_ENV","CLIENT_URL_PROD","CLIENT_URL_DEV","failureRedirect","session","req","res","token","user","generateJWT","cookie","redirect"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CACE,WADF,EAEEC,kBAASC,YAAT,CAAsB,UAAtB,EAAkC;AAChCC,EAAAA,KAAK,EAAE,CAAC,gBAAD,EAAmB,OAAnB;AADyB,CAAlC,CAFF;AAOA,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCF,OAAO,CAACC,GAAR,CAAYE,eAApD,GAAsEH,OAAO,CAACC,GAAR,CAAYG,cAApG;AAEAV,MAAM,CAACC,GAAP,CACE,oBADF,EAEEC,kBAASC,YAAT,CAAsB,UAAtB,EAAkC;AAChCQ,EAAAA,eAAe,EAAE,GADe;AAEhCC,EAAAA,OAAO,EAAE;AAFuB,CAAlC,CAFF,EAME,CAACC,GAAD,EAAMC,GAAN,KAAc;AACZ;AACA,QAAMC,KAAK,GAAGF,GAAG,CAACG,IAAJ,CAASC,WAAT,EAAd;AACAH,EAAAA,GAAG,CAACI,MAAJ,CAAW,eAAX,EAA4BH,KAA5B;AACAD,EAAAA,GAAG,CAACK,QAAJ,CAAad,SAAb;AACD,CAXH;eAceL,M","sourcesContent":["import { Router } from 'express';\r\nimport passport from 'passport';\r\n\r\nconst router = Router();\r\n\r\nrouter.get(\r\n  '/facebook',\r\n  passport.authenticate('facebook', {\r\n    scope: ['public_profile', 'email'],\r\n  }),\r\n);\r\n\r\nconst clientUrl = process.env.NODE_ENV === 'production' ? process.env.CLIENT_URL_PROD : process.env.CLIENT_URL_DEV;\r\n\r\nrouter.get(\r\n  '/facebook/callback',\r\n  passport.authenticate('facebook', {\r\n    failureRedirect: '/',\r\n    session: false,\r\n  }),\r\n  (req, res) => {\r\n    // console.log(req.user);\r\n    const token = req.user.generateJWT();\r\n    res.cookie('x-auth-cookie', token);\r\n    res.redirect(clientUrl);\r\n  },\r\n);\r\n\r\nexport default router;\r\n"],"file":"facebookAuth.js"}