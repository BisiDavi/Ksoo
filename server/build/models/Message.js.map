{"version":3,"sources":["../../src/models/Message.js"],"names":["Schema","mongoose","messageSchema","text","type","String","required","user","Types","ObjectId","ref","timestamps","methods","toJSON","id","_id","createdAt","updatedAt","validateMessage","message","schema","Joi","string","min","max","validate","Message","model"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA,MAAM;AAAEA,EAAAA;AAAF,IAAaC,iBAAnB;AAEA,MAAMC,aAAa,GAAG,IAAIF,MAAJ,CACpB;AACEG,EAAAA,IAAI,EAAE;AACJC,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,QAAQ,EAAE;AAFN,GADR;AAKEC,EAAAA,IAAI,EAAE;AAAEH,IAAAA,IAAI,EAAEH,kBAASD,MAAT,CAAgBQ,KAAhB,CAAsBC,QAA9B;AAAwCC,IAAAA,GAAG,EAAE;AAA7C;AALR,CADoB,EAQpB;AAAEC,EAAAA,UAAU,EAAE;AAAd,CARoB,CAAtB;;AAWAT,aAAa,CAACU,OAAd,CAAsBC,MAAtB,GAA+B,YAAY;AACzC,SAAO;AACLC,IAAAA,EAAE,EAAE,KAAKC,GADJ;AAELZ,IAAAA,IAAI,EAAE,KAAKA,IAFN;AAGLa,IAAAA,SAAS,EAAE,KAAKA,SAHX;AAILC,IAAAA,SAAS,EAAE,KAAKA,SAJX;AAKLV,IAAAA,IAAI,EAAE,KAAKA,IAAL,CAAUM,MAAV;AALD,GAAP;AAOD,CARD;;AAUO,MAAMK,eAAe,GAAIC,OAAD,IAAa;AAC1C,QAAMC,MAAM,GAAG;AACbjB,IAAAA,IAAI,EAAEkB,aAAIC,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,GAAxB,EAA6BlB,QAA7B;AADO,GAAf;AAGA,SAAOe,aAAII,QAAJ,CAAaN,OAAb,EAAsBC,MAAtB,CAAP;AACD,CALM;;;;AAOP,MAAMM,OAAO,GAAGzB,kBAAS0B,KAAT,CAAe,SAAf,EAA0BzB,aAA1B,CAAhB;;eAEewB,O","sourcesContent":["import mongoose from 'mongoose';\r\nimport Joi from 'joi';\r\nconst { Schema } = mongoose;\r\n\r\nconst messageSchema = new Schema(\r\n  {\r\n    text: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },\r\n  },\r\n  { timestamps: true },\r\n);\r\n\r\nmessageSchema.methods.toJSON = function () {\r\n  return {\r\n    id: this._id,\r\n    text: this.text,\r\n    createdAt: this.createdAt,\r\n    updatedAt: this.updatedAt,\r\n    user: this.user.toJSON(),\r\n  };\r\n};\r\n\r\nexport const validateMessage = (message) => {\r\n  const schema = {\r\n    text: Joi.string().min(5).max(300).required(),\r\n  };\r\n  return Joi.validate(message, schema);\r\n};\r\n\r\nconst Message = mongoose.model('Message', messageSchema);\r\n\r\nexport default Message;\r\n"],"file":"Message.js"}